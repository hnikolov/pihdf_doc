<!DOCTYPE html>
<html>
  <head>
    <title>HW module directory structure</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <!-- Bootstrap -->
    <link href="//netdna.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" rel="stylesheet" media="screen">

    <link href="/pihdf_doc/css/site.css" rel="stylesheet" media="screen">
    <link href="/pihdf_doc/css/syntax.css" rel="stylesheet" media="screen">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-48968311-4', 'jandecaluwe.com');
  ga('send', 'pageview');

</script>
  </head>

  <body>

    <!-- Fixed navbar -->
    <div class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/pihdf_doc/">pihdf</a>
        </div>
        <div class="navbar-collapse collapse">

          <ul class="nav navbar-nav navbar-left">
            <li><a href="/pihdf_doc/introduction.html">Introduction</a></li>
            <li><a href="/pihdf_doc/concepts.html">Concepts</a></li>
            <li><a href="/pihdf_doc/install.html">Install</a></li>
            <li><a href="/pihdf_doc/module/">module</a></li>
          </ul>

          <ul class="nav navbar-nav navbar-right">
            <li class="active"><a href="/pihdf_doc/details/">Details</a></li>
            <li><a href="/pihdf_doc/tutorials/">Tutorials</a></li>
            <li><a href="/pihdf_doc/faqs/">FAQs</a></li>
          </ul>

        </div><!--/.nav-collapse -->
      </div>
    </div>


<div class="container">

  <ol class="breadcrumb">
    <li><a href="/pihdf_doc/">Home</a></li>
      <li><a href="/pihdf_doc/details/">Details</a></li>
      <li class="active">HW module directory structure</li>
  </ol>

  <div class="page-header">
    <h1>HW module directory structure</h1>
  </div>

  <div class="row">

    <div class="content">
      <div class="col-md-7" role="main">
        <h2 id="input-json-file">Input .json file</h2>
<p>We use the example from the previous section. That is,
assume, that we would like our HW module <code>hs_example</code> to contain two sub-modules, interconnected with a single <code>HSD</code> interface, then we can use the following <code>hs_example.json</code> file:</p>
<div class="codehilite"><pre> <span class="p">{</span>
     <span class="nt">&quot;design&quot;</span><span class="p">:</span>
     <span class="p">{</span>
         <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;hs_example&quot;</span><span class="p">,</span>
         <span class="nt">&quot;interfaces&quot;</span><span class="p">:</span>
         <span class="p">[</span>
             <span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;rst&quot;</span><span class="p">,</span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;Reset&quot;</span><span class="p">,</span><span class="nt">&quot;active&quot;</span><span class="p">:</span><span class="s2">&quot;1&quot;</span> <span class="p">},</span>
             <span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;clk&quot;</span><span class="p">,</span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;Clock&quot;</span> <span class="p">},</span>
             <span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;rx_hs&quot;</span><span class="p">,</span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;HSD&quot;</span><span class="p">,</span><span class="nt">&quot;data&quot;</span><span class="p">:</span><span class="s2">&quot;64&quot;</span><span class="p">,</span><span class="nt">&quot;direction&quot;</span><span class="p">:</span><span class="s2">&quot;IN&quot;</span><span class="p">},</span>
             <span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;tx_hs&quot;</span><span class="p">,</span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;HSD&quot;</span><span class="p">,</span><span class="nt">&quot;data&quot;</span><span class="p">:</span><span class="s2">&quot;64&quot;</span><span class="p">,</span><span class="nt">&quot;direction&quot;</span><span class="p">:</span><span class="s2">&quot;OUT&quot;</span><span class="p">}</span>
         <span class="p">],</span>
         <span class="nt">&quot;parameters&quot;</span><span class="p">:</span>
         <span class="p">[</span>
             <span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;depth&quot;</span><span class="p">,</span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="s2">&quot;10&quot;</span><span class="p">}</span>
         <span class="p">]</span>
     <span class="p">},</span>

     <span class="nt">&quot;_comment&quot;</span><span class="p">:</span> <span class="s2">&quot;You can put some comments in this way&quot;</span><span class="p">,</span>

     <span class="nt">&quot;structure&quot;</span><span class="p">:</span>
     <span class="p">{</span>
         <span class="nt">&quot;local_interfaces&quot;</span><span class="p">:</span>
         <span class="p">[</span>
             <span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;hs&quot;</span><span class="p">,</span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;HSD&quot;</span><span class="p">,</span><span class="nt">&quot;data&quot;</span><span class="p">:</span><span class="s2">&quot;64&quot;</span><span class="p">,</span><span class="nt">&quot;depth&quot;</span><span class="p">:</span><span class="s2">&quot;2&quot;</span><span class="p">}</span>
         <span class="p">],</span>
         <span class="nt">&quot;design_modules&quot;</span><span class="p">:</span>
         <span class="p">[</span>
             <span class="p">{</span>
                 <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;module1&quot;</span><span class="p">,</span> <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;mydesign1&quot;</span><span class="p">,</span>
                 <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;../mydesign&quot;</span><span class="p">,</span>
                 <span class="nt">&quot;connections&quot;</span><span class="p">:</span>
                 <span class="p">[</span>
                     <span class="p">{</span><span class="nt">&quot;direction&quot;</span><span class="p">:</span><span class="s2">&quot;IN&quot;</span><span class="p">,</span><span class="nt">&quot;local_name&quot;</span><span class="p">:</span><span class="s2">&quot;rst&quot;</span><span class="p">,</span><span class="nt">&quot;connect_to&quot;</span><span class="p">:</span><span class="s2">&quot;rst&quot;</span><span class="p">},</span>
                     <span class="p">{</span><span class="nt">&quot;direction&quot;</span><span class="p">:</span><span class="s2">&quot;IN&quot;</span><span class="p">,</span><span class="nt">&quot;local_name&quot;</span><span class="p">:</span><span class="s2">&quot;clk&quot;</span><span class="p">,</span><span class="nt">&quot;connect_to&quot;</span><span class="p">:</span><span class="s2">&quot;clk&quot;</span><span class="p">},</span>
                     <span class="p">{</span><span class="nt">&quot;direction&quot;</span><span class="p">:</span><span class="s2">&quot;IN&quot;</span><span class="p">,</span><span class="nt">&quot;local_name&quot;</span><span class="p">:</span><span class="s2">&quot;rx&quot;</span><span class="p">,</span><span class="nt">&quot;connect_to&quot;</span><span class="p">:</span><span class="s2">&quot;rx_hs&quot;</span><span class="p">},</span>
                     <span class="p">{</span><span class="nt">&quot;direction&quot;</span><span class="p">:</span><span class="s2">&quot;OUT&quot;</span><span class="p">,</span><span class="nt">&quot;local_name&quot;</span><span class="p">:</span><span class="s2">&quot;tx&quot;</span><span class="p">,</span><span class="nt">&quot;connect_to&quot;</span><span class="p">:</span><span class="s2">&quot;hs&quot;</span><span class="p">},</span>
                     <span class="p">{</span><span class="nt">&quot;local_name&quot;</span><span class="p">:</span><span class="s2">&quot;PARAM&quot;</span><span class="p">,</span><span class="nt">&quot;connect_to&quot;</span><span class="p">:</span><span class="s2">&quot;depth&quot;</span><span class="p">}</span>
                 <span class="p">]</span>
             <span class="p">},</span>
             <span class="p">{</span>
                 <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;module2&quot;</span><span class="p">,</span> <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;mydesign2&quot;</span><span class="p">,</span>
                 <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                 <span class="nt">&quot;connections&quot;</span><span class="p">:</span>
                 <span class="p">[</span>
                     <span class="p">{</span><span class="nt">&quot;direction&quot;</span><span class="p">:</span><span class="s2">&quot;IN&quot;</span><span class="p">,</span><span class="nt">&quot;local_name&quot;</span><span class="p">:</span><span class="s2">&quot;rst&quot;</span><span class="p">,</span><span class="nt">&quot;connect_to&quot;</span><span class="p">:</span><span class="s2">&quot;rst&quot;</span><span class="p">},</span>
                     <span class="p">{</span><span class="nt">&quot;direction&quot;</span><span class="p">:</span><span class="s2">&quot;IN&quot;</span><span class="p">,</span><span class="nt">&quot;local_name&quot;</span><span class="p">:</span><span class="s2">&quot;clk&quot;</span><span class="p">,</span><span class="nt">&quot;connect_to&quot;</span><span class="p">:</span><span class="s2">&quot;clk&quot;</span><span class="p">},</span>
                     <span class="p">{</span><span class="nt">&quot;direction&quot;</span><span class="p">:</span><span class="s2">&quot;IN&quot;</span><span class="p">,</span><span class="nt">&quot;local_name&quot;</span><span class="p">:</span><span class="s2">&quot;rx&quot;</span><span class="p">,</span><span class="nt">&quot;connect_to&quot;</span><span class="p">:</span><span class="s2">&quot;hs&quot;</span><span class="p">},</span>
                     <span class="p">{</span><span class="nt">&quot;direction&quot;</span><span class="p">:</span><span class="s2">&quot;OUT&quot;</span><span class="p">,</span><span class="nt">&quot;local_name&quot;</span><span class="p">:</span><span class="s2">&quot;tx&quot;</span><span class="p">,</span><span class="nt">&quot;connect_to&quot;</span><span class="p">:</span><span class="s2">&quot;tx_hs&quot;</span><span class="p">}</span>
                 <span class="p">]</span>
             <span class="p">}</span>
         <span class="p">]</span>
     <span class="p">}</span>
 <span class="p">}</span>
</pre></div>


<p>In this example, the (global/top-level) <code>Reset</code> and <code>Clock</code> interfaces are connected to the sub-modules, the <code>rx_hs</code> interface is connected to the input of <code>module1</code>, and the output of <code>module2</code> is connected to the output interface <code>tx_hs</code>. The two modules are connected via a hand-shake interface (<code>hs</code>) which itself contains a FIFO buffer of depth 2. Note also how comments can be added in the .json file if needed.</p>
<h2 id="generated-directory-structure">Generated directory structure</h2>
<p>The .json file above is sufficient to create a structured design in <code>pihdf</code>:</p>
<div class="codehilite"><pre>$ module hs_example new
</pre></div>


<p>Since, <code>path</code> of <code>module2</code> is empty, the command above
will create a new design (sub-)project for <code>module2</code> as well. Consequently, the created directory structure of <code>hs_example</code> will look as follows:</p>
<div class="codehilite"><pre>        hs_example
        ├── hs_example.dot
        ├── hs_example.json
        ├── hs_example.py
        ├── __init__.py
        ├── out
        ├── src
        │   ├── compile_list.txt
        │   ├── hs_example_beh.py
        │   ├── hs_example_rtl.py
        │   ├── __init__.py
        │   └── modules
        │       ├── __init__.py
        │       └── mydesign2
        │           ├── __init__.py
        │           ├── mydesign2.json
        │           ├── mydesign2.py
        │           ├── out
        │           ├── src
        │           │   ├── compile_list.txt
        │           │   ├── __init__.py
        │           │   ├── mydesign2_beh.py
        │           │   └── mydesign2_rtl.py
        │           └── test
        │               ├── __init__.py
        │               ├── mydesign2_cosim.gtkw
        │               ├── mydesign2.gtkw
        │               ├── t_mydesign2.py
        │               ├── utest_mydesign2.py
        │               └── vectors
        └── test
            ├── hs_pt_cosim.gtkw
            ├── hs_pt.gtkw
            ├── __init__.py
            ├── inreface_map.py
            ├── t_hs_pt.py
            ├── utest_hs_pt.py
            └── vectors
</pre></div>


<p>TODO: Note that the directory structure of "mydesign2" resembles the directory structure of "hs_example"... </p>
      </div>
    </div>

    <div class="col-md-3" role="complementary">
      <nav class="hidden-print hidden-xs hidden-sm">
        <div class="sidebar" data-spy="affix" data-offset-top="80" data-offset-bottom="60">
          <div class="well">
            <a href="#"><strong>HW module directory structure</strong></a>
            <div class="toc">
<ul>
<li><a href="#input-json-file">Input .json file</a></li>
<li><a href="#generated-directory-structure">Generated directory structure</a></li>
</ul>
</div>

          </div>
        </div>
      </nav>
    </div>

  </div>

  <ul class="pager">
    <li class="previous"><a href="/pihdf_doc/details/json.html">&larr; json file format of a HW module</a></li>
    <li class="next"><a href="/pihdf_doc/details/utest.html">Unit testing of design modules &rarr;</a></li>
  </ul>

    <div class="footer">
        <p>Website powered by <a href="http://urubu.jandecaluwe.com">Urubu</a></p>
    </div>


</div>


    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://code.jquery.com/jquery.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>

  </body>
</html>
